<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Palermo Helper | Joyfy</title>
  <link rel="stylesheet" href="../style.css">
  <style>
    /* Custom adjustments for the Palermo UI */
    .game-box { max-width: 600px; margin: 40px auto; padding: 30px; }
    input { 
      width: 100%; padding: 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1); 
      background: rgba(0,0,0,0.3); color: white; margin-bottom: 20px; font-size: 1rem;
    }
    .status-container { display: flex; flex-wrap: wrap; gap: 15px; margin-top: 20px; text-align: left; }
    .status-box { flex: 1 1 200px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 12px; }
    .status-box h4 { margin: 0 0 10px; color: var(--secondary); border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
    .status-box ul { padding-left: 20px; color: var(--text-muted); }
    .role-display { font-size: 1.5rem; font-weight: 800; color: var(--primary); margin: 20px 0; min-height: 1.6em; }
    .narration-text { font-size: 1.1rem; line-height: 1.6; margin: 20px 0; white-space: pre-wrap; }
    .mad-win { color: #ff66ff; font-weight: bold; font-size: 1.3rem; }
  </style>
</head>
<body>

<div class="orb-container">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
</div>

<header>
  <div class="logo"><img src="../icons/logo.png" alt="Joyfy"><span>Joyfy</span></div>
  <div class="nav-links"><a href="index.html">â¬… Back Home</a></div>
</header>

<div class="game-box reveal active">
  <h1>ğŸŒ™ ÎœÎ¹Î± ÎÏÏ‡Ï„Î± ÏƒÏ„Î¿ Î Î±Î»Î­ÏÎ¼Î¿</h1>
  <p style="color: var(--text-muted); margin-bottom: 25px;">Î’Î¿Î·Î¸ÏŒÏ‚ Î‘Ï†Î·Î³Î·Ï„Î® Î³Î¹Î± Ï„Î¿ ÎºÎ»Î±ÏƒÎ¹ÎºÏŒ Ï€Î±Î¹Ï‡Î½Î¯Î´Î¹.</p>

  <div id="setupArea">
    <label style="display:block; margin-bottom:8px; text-align:left;">ÎŸÎ½ÏŒÎ¼Î±Ï„Î± Ï€Î±Î¹ÎºÏ„ÏÎ½ (Ï‡Ï‰ÏÎ¹ÏƒÎ¼Î­Î½Î± Î¼Îµ ÎºÏŒÎ¼Î¼Î±)</label>
    <input type="text" id="names" placeholder="Ï€.Ï‡. ÎœÎ±ÏÎ¯Î±, Î“Î¹Î¬Î½Î½Î·Ï‚, Î•Î»Î­Î½Î·">
    <button id="heroBtn" onclick="generateRoles()" style="width:100%;">ğŸ² Î“ÎµÎ½Î½Î®ÏƒÏ„Îµ Î¡ÏŒÎ»Î¿Ï…Ï‚</button>
  </div>

  <div id="revealBox" style="display:none; text-align:center;">
    <h3 id="currentPlayer" style="margin-bottom:15px;"></h3>
    <button class="card" id="revealBtn" onclick="revealRole()" style="width:100%; cursor:pointer; background:rgba(255,255,255,0.1);">ğŸ‘ï¸ Î”ÎµÎ¯Î¾Îµ Î¡ÏŒÎ»Î¿</button>
    <div id="roleDisplay" class="role-display"></div>
    <button id="nextBtn" class="hero-style-btn" onclick="nextPlayer()" style="display:none; background:var(--primary); color:white; border:none; padding:10px 25px; border-radius:20px; cursor:pointer;">â¡ï¸ Î•Ï€ÏŒÎ¼ÎµÎ½Î¿Ï‚ Î Î±Î¯ÎºÏ„Î·Ï‚</button>
  </div>

  <div id="narrationBox" style="display:none;">
    <h2 id="phaseLabel" style="color: var(--secondary); margin:0;">Î¦Î¬ÏƒÎ·: ÎÏÏ‡Ï„Î±</h2>
    <p id="narrationText" class="narration-text"></p>
    
    <div class="status-container">
      <div class="status-box">
        <h4>ğŸ§â€â™‚ï¸ Î–Ï‰Î½Ï„Î±Î½Î¿Î¯</h4>
        <ul id="aliveList"></ul>
      </div>
      <div class="status-box">
        <h4>ğŸª¦ ÎÎµÎºÏÎ¿Î¯</h4>
        <ul id="deadList"></ul>
      </div>
    </div>
    <button id="narrationBtn" onclick="nextNarrationStep()" style="margin-top:25px; background:var(--primary); color:white; border:none; padding:15px 40px; border-radius:30px; cursor:pointer; font-weight:bold;">â¡ï¸ Î•Ï€ÏŒÎ¼ÎµÎ½Î¿</button>
  </div>
</div>

<footer>
  <p>Â© 2025 Joyfy Games Â· Palermo Helper</p>
  <div style="margin-top: 10px;">
    <a href="privacy.html" style="color: var(--text-muted); text-decoration: none; font-size: 0.8rem; margin: 0 10px;">Privacy Policy</a>
    <a href="about.html" style="color: var(--text-muted); text-decoration: none; font-size: 0.8rem; margin: 0 10px;">About Us</a>
  </div>
</footer>

<script>
    // Full Logic Restored from your original file
    let players = [];
    let roles = [];
    let alivePlayers = [];
    let deadPlayers = [];
    let index = 0;
    let narrationStep = 0;
    let gamePhase = "reveal";
    let roundNumber = 1;

    const nightNarration = [
      "Î— Î½ÏÏ‡Ï„Î± Ï€Î­Ï†Ï„ÎµÎ¹ ÏƒÏ„Î¿ Î Î±Î»Î­ÏÎ¼Î¿. ÎŒÎ»Î¿Î¹ Î¿Î¹ Ï€Î±Î¯ÎºÏ„ÎµÏ‚ ÎºÎ»ÎµÎ¯Î½Î¿Ï…Î½ Ï„Î± Î¼Î¬Ï„Î¹Î± Ï„Î¿Ï…Ï‚â€¦",
      "ÎŸÎ¹ Î”Î¿Î»Î¿Ï†ÏŒÎ½Î¿Î¹ Î±Î½Î¿Î¯Î³Î¿Ï…Î½ Ï„Î± Î¼Î¬Ï„Î¹Î± Ï„Î¿Ï…Ï‚ ÎºÎ±Î¹ Î±Î½Î±Î³Î½Ï‰ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Î¼ÎµÏ„Î±Î¾Ï Ï„Î¿Ï…Ï‚â€¦",
      "ÎŸÎ¹ Î”Î¿Î»Î¿Ï†ÏŒÎ½Î¿Î¹ Î¾Î±Î½Î±ÎºÎ»ÎµÎ¯Î½Î¿Ï…Î½ Ï„Î± Î¼Î¬Ï„Î¹Î± Ï„Î¿Ï…Ï‚.",
      "ÎŸ Î¡Î¿Ï…Ï†Î¹Î¬Î½Î¿Ï‚ Î±Î½Î¿Î¯Î³ÎµÎ¹ Ï„Î± Î¼Î¬Ï„Î¹Î± Ï„Î¿Ï… ÎºÎ±Î¹ Î´ÎµÎ¯Ï‡Î½ÎµÎ¹ Ï€Î¿Î¹Î¿Î½ Î¸Î­Î»ÎµÎ¹ Î½Î± ÎµÎ»Î­Î³Î¾ÎµÎ¹.",
      "ÎŸ Î¡Î¿Ï…Ï†Î¹Î¬Î½Î¿Ï‚ Î¾Î±Î½Î±ÎºÎ»ÎµÎ¯Î½ÎµÎ¹ Ï„Î± Î¼Î¬Ï„Î¹Î±.",
      "ÎŸ Î‘ÏƒÏ„Ï…Î½ÏŒÎ¼Î¿Ï‚ Î±Î½Î¿Î¯Î³ÎµÎ¹ Ï„Î± Î¼Î¬Ï„Î¹Î± ÎºÎ±Î¹ ÎºÎ¿Î¹Ï„Î¬Î¶ÎµÎ¹ Ï€ÏÎ¿ÏƒÎµÎºÏ„Î¹ÎºÎ¬â€¦",
      "ÎŸ Î‘ÏƒÏ„Ï…Î½ÏŒÎ¼Î¿Ï‚ ÎºÎ»ÎµÎ¯Î½ÎµÎ¹ Ï„Î± Î¼Î¬Ï„Î¹Î± Ï„Î¿Ï….",
      "ÎŸ Î¤ÏÎµÎ»ÏŒÏ‚ Î±Î½Î¿Î¯Î³ÎµÎ¹ Ï„Î± Î¼Î¬Ï„Î¹Î±â€¦ Ï‡Î±Î¼Î¿Î³ÎµÎ»Î¬ ÏÏ€Î¿Ï€Ï„Î±â€¦ ÎºÎ±Î¹ Î¾Î±Î½Î±ÎºÎ»ÎµÎ¯Î½ÎµÎ¹.",
      "Î— Î¼Î­ÏÎ± Î¾Î·Î¼ÎµÏÏÎ½ÎµÎ¹. ÎŒÎ»Î¿Î¹ Î±Î½Î¿Î¯Î³Î¿Ï…Î½ Ï„Î± Î¼Î¬Ï„Î¹Î±!"
    ];

    function generateRoles() {
      const input = document.getElementById("names").value.trim();
      if (!input) { alert("Î’Î¬Î»Ï„Îµ Î¿Î½ÏŒÎ¼Î±Ï„Î± Ï€Î±Î¹ÎºÏ„ÏÎ½!"); return; }
      players = input.split(",").map(n => n.trim()).filter(n => n);
      if (players.length < 5) { alert("Î§ÏÎµÎ¹Î¬Î¶Î¿Î½Ï„Î±Î¹ Ï„Î¿Ï…Î»Î¬Ï‡Î¹ÏƒÏ„Î¿Î½ 5 Ï€Î±Î¯ÎºÏ„ÎµÏ‚!"); return; }

      alivePlayers = [...players];
      deadPlayers = [];
      roles = ["Î”Î¿Î»Î¿Ï†ÏŒÎ½Î¿Ï‚", "Î”Î¿Î»Î¿Ï†ÏŒÎ½Î¿Ï‚", "Î‘ÏƒÏ„Ï…Î½ÏŒÎ¼Î¿Ï‚", "Î¡Î¿Ï…Ï†Î¹Î¬Î½Î¿Ï‚", "Î¤ÏÎµÎ»ÏŒÏ‚"];
      while (roles.length < players.length) roles.push("Î Î¿Î»Î¯Ï„Î·Ï‚");
      roles.sort(() => Math.random() - 0.5);

      index = 0;
      narrationStep = 0;
      roundNumber = 1;
      gamePhase = "reveal";

      document.getElementById("setupArea").style.display = "none";
      document.getElementById("revealBox").style.display = "block";
      updateAliveList();
      updateDeadList();
      updatePlayer();
    }

    function updatePlayer() {
      document.getElementById("currentPlayer").innerText = "Î Î±Î¯ÎºÏ„Î·Ï‚: " + players[index];
      document.getElementById("roleDisplay").innerText = "";
      document.getElementById("nextBtn").style.display = "none";
      document.getElementById("revealBtn").style.display = "block";
    }

    function revealRole() {
      document.getElementById("roleDisplay").innerText = roles[index];
      document.getElementById("revealBtn").style.display = "none";
      document.getElementById("nextBtn").style.display = "inline-block";
    }

    function nextPlayer() {
      index++;
      if (index >= players.length) {
        document.getElementById("revealBox").style.display = "none";
        startNightNarration();
      } else {
        updatePlayer();
      }
    }

    function startNightNarration() {
      gamePhase = "night";
      narrationStep = 0;
      document.getElementById("narrationBox").style.display = "block";
      document.getElementById("phaseLabel").innerText = "Î¦Î¬ÏƒÎ·: ÎÏÏ‡Ï„Î±";
      document.getElementById("narrationText").innerText = `Î“ÏÏÎ¿Ï‚ ${roundNumber}\n\n${nightNarration[narrationStep]}`;
    }

    function nextNarrationStep() {
      if (gamePhase === "night") {
        narrationStep++;
        if (narrationStep >= nightNarration.length) {
          startDiscussion();
        } else {
          document.getElementById("narrationText").innerText = nightNarration[narrationStep];
        }
      } else if (gamePhase === "discussion") {
        gamePhase = "mafia_vote";
        document.getElementById("phaseLabel").innerText = "Î¦Î¬ÏƒÎ·: Î‘Ï€ÏŒÏ†Î±ÏƒÎ· Î”Î¿Î»Î¿Ï†ÏŒÎ½Ï‰Î½";
        document.getElementById("narrationText").innerText = "ÎŸÎ¹ Î´Î¿Î»Î¿Ï†ÏŒÎ½Î¿Î¹ Î±Ï€Î¿Ï†Î±ÏƒÎ¯Î¶Î¿Ï…Î½ Ï€Î¿Î¹Î¿Î½ Î¸Î± ÏƒÎºÎ¿Ï„ÏÏƒÎ¿Ï…Î½.";
      } else if (gamePhase === "mafia_vote") {
        handleMafiaKill();
      }
    }

    function startDiscussion() {
      gamePhase = "discussion";
      document.getElementById("phaseLabel").innerText = "Î¦Î¬ÏƒÎ·: Î£Ï…Î¶Î®Ï„Î·ÏƒÎ·";
      document.getElementById("narrationText").innerText = "ÎŸÎ¹ Ï€Î±Î¯ÎºÏ„ÎµÏ‚ ÏƒÏ…Î¶Î·Ï„Î¿ÏÎ½ Ï€Î¿Î¹Î¿Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± ÎµÎ¯Î½Î±Î¹ Î¿ Î´Î¿Î»Î¿Ï†ÏŒÎ½Î¿Ï‚.";
    }

    function handleMafiaKill() {
      const victim = prompt("Î Î¿Î¹Î¿Ï‚ Ï€Î±Î¯ÎºÏ„Î·Ï‚ ÏƒÎºÎ¿Ï„ÏÎ¸Î·ÎºÎµ;");
      if (!victim || !alivePlayers.includes(victim)) {
        alert("Î¤Î¿ ÏŒÎ½Î¿Î¼Î± Î´ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ!");
        return;
      }

      const roleOfVictim = roles[players.indexOf(victim)];
      alivePlayers = alivePlayers.filter(p => p !== victim);
      deadPlayers.push(victim);
      updateAliveList();
      updateDeadList();

      alert(`${victim} ÏƒÎºÎ¿Ï„ÏÎ¸Î·ÎºÎµ! (Î¡ÏŒÎ»Î¿Ï‚: ${roleOfVictim})`);

      if (roleOfVictim === "Î¤ÏÎµÎ»ÏŒÏ‚") {
        declareMadmanWin(victim);
      } else if (!checkGameEnd()) {
        roundNumber++;
        startNightNarration();
      }
    }

    function declareMadmanWin(name) {
      gamePhase = "game_over";
      document.getElementById("phaseLabel").innerText = "Î¤Î­Î»Î¿Ï‚ Î Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï";
      document.getElementById("narrationText").innerHTML = `<span class="mad-win">ÎŸ Î¤ÏÎµÎ»ÏŒÏ‚ ÎºÎµÏÎ´Î¯Î¶ÎµÎ¹! ğŸ¤ª</span><br><br>ÎŸ ${name} Î®Ï„Î±Î½ Î¿ Î¤ÏÎµÎ»ÏŒÏ‚!`;
      document.getElementById("narrationBtn").style.display = "none";
    }

    function checkGameEnd() {
      const aliveRoles = alivePlayers.map(p => roles[players.indexOf(p)]);
      const mafiaAlive = aliveRoles.filter(r => r === "Î”Î¿Î»Î¿Ï†ÏŒÎ½Î¿Ï‚").length;
      const citizensAlive = alivePlayers.length - mafiaAlive;

      if (mafiaAlive === 0) {
        finishGame("ÎŸÎ¹ Ï€Î¿Î»Î¯Ï„ÎµÏ‚ Î½Î¹ÎºÎ¿ÏÎ½! ğŸ‰");
        return true;
      } else if (mafiaAlive >= citizensAlive) {
        finishGame("ÎŸÎ¹ Î´Î¿Î»Î¿Ï†ÏŒÎ½Î¿Î¹ ÎºÎµÏÎ´Î¯Î¶Î¿Ï…Î½! â˜ ï¸");
        return true;
      }
      return false;
    }

    function finishGame(msg) {
      gamePhase = "game_over";
      document.getElementById("phaseLabel").innerText = "Î¤Î­Î»Î¿Ï‚ Î Î±Î¹Ï‡Î½Î¹Î´Î¹Î¿Ï";
      document.getElementById("narrationText").innerText = msg;
      document.getElementById("narrationBtn").style.display = "none";
    }

    function updateAliveList() {
      document.getElementById("aliveList").innerHTML = alivePlayers.map(p => `<li>${p}</li>`).join("");
    }

    function updateDeadList() {
      document.getElementById("deadList").innerHTML = deadPlayers.map(p => `<li>${p}</li>`).join("");
    }
</script>
</body>
</html>